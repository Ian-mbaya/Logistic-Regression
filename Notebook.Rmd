---
title: "Final Project Notebook"
author: "Ian Mbaya"
date: "2024-03-12"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Load the Neccessary Libraries
```{r L}
library('tidyverse')
library('tidymodels')
library('caret')
library('pROC')
```

# Loading the Data 
```{r load-data}
attacks <- read.csv("data/CTU2.csv", sep = "|")
```

# Explalatory Data Analysis
## Take a Glimpse of the Data
```{r}
glimpse(attacks)
```
## Create a Data Dictionary
```{r}
# Data Dictionary for Network Connection Data
data_dictionary <- tibble::tribble(
  ~Field_Name,     ~Description,                                   ~Type,
  "ts",            "The timestamp of the connection event.",      "time",
  "uid",           "A unique identifier for the connection.",     "string",
  "id.orig_h",     "The source IP address.",                      "addr",
  "id.orig_p",     "The source port.",                            "port",
  "id.resp_h",     "The destination IP address.",                 "addr",
  "id.resp_p",     "The destination port.",                       "port",
  "proto",         "The network protocol used (e.g., 'tcp').",    "enum",
  "service",       "The service associated with the connection.", "string",
  "duration",      "The duration of the connection.",             "interval",
  "orig_bytes",    "The number of bytes sent from the source to the destination.", "count",
  "resp_bytes",    "The number of bytes sent from the destination to the source.", "count",
  "conn_state",    "The state of the connection.",                "string",
  "local_orig",    "Indicates whether the connection is considered local or not.", "bool",
  "local_resp",    "Indicates whether the connection is considered local or not.", "bool",
  "missed_bytes",  "The number of missed bytes in the connection.", "count",
  "history",       "A history of connection states.",             "string",
  "orig_pkts",     "The number of packets sent from the source to the destination.", "count",
  "orig_ip_bytes", "The number of IP bytes sent from the source to the destination.", "count",
  "resp_pkts",     "The number of packets sent from the destination to the source.", "count",
  "resp_ip_bytes", "The number of IP bytes sent from the destination to the source.", "count",
  "tunnel_parents","Indicates if this connection is part of a tunnel.", "set[string]",
  "label",         "A label associated with the connection (e.g., 'Malicious' or 'Benign').", "string",
  "detailed_label","A more detailed description or label for the connection.", "string"
)

# Print the data dictionary
print(data_dictionary)

```


## Checking for Missing Values
```{r skim-data}
skimr::skim(attacks)
```
# Data Summary
```{r}
summary(attacks)
```
From the summary above it seems  like we might have too many variables that may not be  contributing to the model. In the following steps we will be reducing dimensionality  by removing someof the columns
## Dimensionality Reduction
```{r}
# Removing some of the less  important variables from the data 
data1 <- select(attacks, 
                        label, ts,
                        id.orig_h, id.resp_h, 
                        id.orig_p, id.resp_p, 
                        proto, 
                        conn_state, duration, 
                        resp_ip_bytes, orig_ip_bytes)

# View the first few rows of the selected data
summary(data1)

```



